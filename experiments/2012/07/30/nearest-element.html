<!DOCTYPE html>
<html>
<head>
  
    <title>Trovare il più vicino - </title>
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="shortcut icon" href="http://apra.github.com/favicon.ico" />
  <link href='http://fonts.googleapis.com/css?family=Cabin:700|Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
  <link href="http://apra.github.com/css/style.css" type="text/css" rel="stylesheet" />
  <link href="http://apra.github.com/css/syntax.css" type="text/css" rel="stylesheet" />
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="http://apra.github.com/js/site.js"></script>
</head>

<body>

    <div id="top-bar">
            <ul>
                <li id="tweet-icon"><a href="http://twitter.com/codefeeling" target="_blank"><img width="41" height="41" src="http://apra.github.com/images/twitter-bird.png"/></a></li>
            </ul>
            <ul>   
                <li id="fork" class="hub">FOLLOW ME ON</li><a target="_blank" href="http://github.com/Apra" id="github" class="hub">GITHUB</a>
            </ul>
        </div>
<header>
        
   <div id="festoonleft"></div> 
   <a id="tit" href="http://apra.github.com">
    
	  <div id="title"> 
	     <img src="http://apra.github.com/images/arrow.png" width="18" height="24" /> 
	     <img src="http://apra.github.com/images/title.png" width="121" height="67" /> 
	  </div>
	  
      </a><div id="festoonright"></div>
</header>
<script type="text/javascript" >

$(function(){
$("#tweet").html('Probably loading last tweet...');
$.getJSON("http://twitter.com/statuses/user_timeline/codefeeling.json?callback=?", function(data) {
pattern=/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/;
			patthash=/(#)(\w+)/;
			patttagg=/(\@)(\S+)/;
			tagg=patttagg.exec(data[0].text);
			linc=pattern.exec(data[0].text);
			hash=patthash.exec(data[0].text);
			text=data[0].text;
			(linc) ? text=text.replace(linc[0],'<a target="_blank" href="'+linc[0]+'">'+linc[0]+'</a>'):text;
			(hash) ? text=text.replace(hash[0],'<a target="_blank" href="https://twitter.com/#!/search?q='+hash[2]+'">'+hash[0]+'</a>'):text;  
     		(tagg) ? text=text.replace(tagg[0],'<a target="_blank" href="https://twitter.com/'+tagg[2]+'">'+tagg[0]+'</a>'):text;
     $("#tweet").html('<a target="_blank" href="http://twitter.com/codefeeling" style="float:left;margin: 0 4px;color:#f44f59">@codefeeling</a>'+text);
});
});
</script>
    
    
      <div class="clearer"></div>
<section id="post">
<section id="top-part">
	<h1 class="art-title">Trovare il più vicino<span class="dot">.</span></h1>
	<div id="date">Publishing date: 30 07 2012</div>  
	<div class="art-image">
		<img src="http://apra.github.com/uploads/image2.jpg" />   
	</div>
	<div class="content">
		<h2><a href="http://apra.github.com/categories/experiments">experiments</a></h2>
		<div class="iconclass"><img src="http://apra.github.com/images/experiments-logo.png" /></div>
		<div class="tags">
			
     				<li class="tag"><a href="http://apra.github.com/tag/simple">simple</a></li>
    		
     				<li class="tag"><a href="http://apra.github.com/tag/javascript">javascript</a></li>
    					
		</div>
	</div>
</section>
	<div id="thepost">
   	<p>Alcune volte, può essere utile trovare quale sia il più vicino, tra due numeri, ad un terzo, ma non sempre riusciamo a farci venire in mente il codice adatto per farlo.</p>

<p>Oggi voglio condividere con voi una di quelle funzioni da tenere da parte, in quel file dove mettiamo i vari esperimenti e tentativi, alcuni utili, altri meno, ma che, prima o poi, sappiamo torneranno utili.</p>

<p>Quello che segue è un codice molto semplice, che probabilmente non serve nemmeno storare da qualche parte: controlla semplicemente chi dei due è il più vicino, con un semplice if.</p>

<p>Per chi non fosse pratico, Math.abs fa parte di tutta quella serie di strumenti matematici di javascript che permettono di eseguire tante belle cose (come anche sin, cos e pi greco) tra cui "abs" che viene utilizzato come opratore modulo, l'operatore che è indicato solitamente con |a+b| e che mantiene i segni se è maggiore (o uguale) a zero oppure cambia di segno se è minore (o uguale) di zero (lasciate stare la definizione matematica che probabilmente solo a me piace). In pratica permette ad un numero di essere sempre positivo e, se non lo è, lo fa diventare (è un operatore piuttosto ottimista).</p>

<p>Ora che mi sono dilugato inutilmente, ecco il codice:</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">function</span> <span class="nx">thenearest</span><span class="p">(</span><span class="nx">n1</span><span class="p">,</span><span class="nx">n2</span><span class="p">,</span><span class="nx">to</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">n1</span><span class="o">-</span><span class="nx">to</span><span class="p">)</span><span class="o">&gt;</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">n2</span><span class="o">-</span><span class="nx">to</span><span class="p">)){</span>
        <span class="k">return</span> <span class="nx">n2</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="k">return</span> <span class="nx">n1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>


<p>Ma il vero nerd non si ferma, indaga e si mette alla prova. E' per questo che ho creato una funzione che riesce a trovare il più vicino tra una serie "quasi" "infinita" (le virgolette sono d'obbligo in quanto l'infinito, in informatica è piuttosto inesistente, per questioni di cui non parlerò in quest'articolo).</p>

<p>Questo codice è un po' più complesso, se volete, copincollatelo e basta, oppure leggete sotto la spiegazione.</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">function</span> <span class="nx">thenearest</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="nx">to</span><span class="p">){</span>
    
    <span class="kd">var</span> <span class="nx">diff</span><span class="o">=</span><span class="p">[];</span>

    <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="nx">diff</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">-</span><span class="nx">to</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">min</span><span class="o">=</span><span class="nx">diff</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    
    <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">diff</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">diff</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">&lt;</span><span class="nx">min</span><span class="p">){</span>
            <span class="nx">min</span><span class="o">=</span><span class="nx">diff</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="k">return</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">diff</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">min</span><span class="p">)];</span>
<span class="p">}</span>
</code></pre>
</div>


<p>Devo premettere che non ho fatto uno stress-test estremo (ho solo provato con numeri bassi) quindi potrebbe crashare, se succede, fatemene sapere le circostanze in qualche modo (nella sidebar trovate twitter, google+ e qui sotto i commenti).</p>

<p>Tutto comincia definendo un array vuota che conterrà le differenze, come abbiamo fatto nel primo esempio.
Dopo aver storato tutte le distanze in un'array usando la variabile i, definiamo una variabile min con il primo valore del vettore diff.</p>

<p>In questo modo possiamo poi trovare, tramite un ciclo for ed utilizzando sempre la variabile i (per risparmiare, c'è crisi) il valore più piccolo.</p>

<p>In giro per il web trovo molti codici (soprattutto in C e Java, non so perchè) i quali, per trovare il minore tra una serie di valori usano definire una variabile con il massimo valore che quella variabile può avere e poi eseguire lo stesso if e tutto il resto del procedimento uguale a quello che ho fatto qui sopra. Quello che io mi chiedo è: perchè riempire uno variabile totalmente, rischiando di rallentare il codice (so che non si rallenta molto, però...) quando si può settare di default la variabile con il primo valore dell'array?</p>

<p>Tornando a noi. Alla fine, mostro il valore che ha come index (indice), l'index del valore più piccolo nell'array diff. IndexOf viene utilizzato proprio per trovare l'indice di qualcosa in un'array. Nella maggior parte dei casi viene usato (o perlomeno: io lo uso) per trovare quando un valore NON è presente in un array, in quanto è molto più utile.</p>

<p>Spero di essere stato utile e DFTBA.</p>

   	<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
  {lang: "it"}
</script>	
<div id="social-bar">
	<h3>YOU <span style="color:#a3d3f9">LIKED</span> ? <span style="color:#f4343f;margin: 0 0 0 5px;"> SHARE</span>.</h3>
	<li><div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#appId=108089942626497&amp;xfbml=1"></script><fb:like href="" send="true" layout="button_count" width="150" show_faces="false" action="like" font="lucida grande"></fb:like></li>
	<li><a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="tutorialdocks">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li>
	<li><g:plusone size="medium"></g:plusone></li>
</div>
   	<div id="bio">
			<div id="photo"><img src="http://apra.github.com/images/account_icon.png" /></div>
			<p id="intro"><em>Web Developer & WP7 Developer, appassionato di Javascript, PHP e C#.</em></p>
   	</div>
   	 <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'codefeeling'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
	</div>
	<div id="sidebar">
	<ul id="sidetwitter">
	<h3 style="font-family:Bebas">Find me on</h3>
	<br />
	<iframe src="http://markdotto.github.com/github-buttons/github-btn.html?user=apra&type=follow"
  allowtransparency="true" frameborder="0" scrolling="0" width="165px" height="20px"></iframe>
		<a href="https://twitter.com/codefeeling" class="twitter-follow-button" data-show-count="false" data-lang="it">Segui @codefeeling</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>	
<!-- Inserisci questo tag nel punto in cui vuoi che sia visualizzato l'elemento badge. -->
<li id="googleplusli"><div class="g-plus" data-width="182" data-height="69" data-href="//plus.google.com/109692874390234527065?rel=author"></div></li>

<!-- Inserisci questo tag dopo l'ultimo tag di badge. -->
<script type="text/javascript">
  window.___gcfg = {lang: 'it'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>	

	</ul>
	<ul id="sideposts">
	<h3 style="font-family:Bebas">Other entries</h3>
	<br />
	
	
		<li><a href="/thoughts/2013/02/16/gesture-article.html">Why using gesture-based technology? </a> <p>30 07 2012</p></li>
	
	
	
		<li><a href="/thoughts/2013/02/16/captcha-article.html">Un-user friendly 'CAPTCHA' </a> <p>30 07 2012</p></li>
	
	
	
		<li><a href="/experiments/2012/07/30/nearest-element.html">Trovare il più vicino </a> <p>30 07 2012</p></li>
	
	
	</ul>
</div>
  </section>
 
 <!-- <div class="next-prev-nav low-top">
    
      &laquo;&nbsp;<a href="/projects/2012/06/09/first-article-projects.html" rel="previous" title="first article projects">first article projects</a>
    
  
    
      
        |
      
    
    </div> -->
<script>
$(document).ready(function(){
	if($(window).width()<900&&$(window).width()>850){

		$('body').find('section#post #top-part .content h2').each(function(){
			$(this).css('font-size',((2.5/900)*$(window).width())+'em')
		});
	}else{
		$('body').find('section#post #top-part .content h2').each(function(){
			$(this).css('font-size',('2.5em'))
		});
	}
	$('body').find('section#post #top-part .content h2').each(function(){
		$(this).data('size-font',$(this).css('font-size'));
	});
});
$(window).resize(function(){
	if($(window).width()<900&&$(window).width()>850){$('body').find('section#post #top-part .content h2').each(function(){
			$(this).css('font-size',((2.5/900)*$(window).width())+'em')
		});
		}else{
		$('body').find('section#post #top-part .content h2').each(function(){
			$(this).css('font-size',('2.5em'))
		});
		}
});
$('#bio').live('click',function(){
	window.location='https://plus.google.com/109692874390234527065'
})
</script>


    

      

    
    <div class="clearer"></div>
<footer>
<section>
<div id="copyright">
	<p>CC Attribution-Share Alike 3.0</p>
	<div id="footer-title"> 
		<a href="http://apra.github.com"><img src="http://apra.github.com/images/title-all.png" /></a> 
	</div> 
</div>
</section>
</footer>
    
</body>
</html>
